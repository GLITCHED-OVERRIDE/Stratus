<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Stratus</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
  html, body {
    margin: 0;
    height: 100%;
    background: #070707;
    color: #eee;
    font-family: system-ui, sans-serif;
  }

  #app {
    display: grid;
    grid-template-columns: 320px 1fr;
    height: 100%;
  }

  #games {
    background: #111;
    padding: 12px;
    overflow-y: auto;
  }

  .game {
    cursor: pointer;
    border: 1px solid #222;
    border-radius: 6px;
    margin-bottom: 14px;
    overflow: hidden;
  }

  .game:hover { border-color: #d22; }

  .game img {
    width: 100%;
    display: block;
  }

  .title {
    padding: 8px;
    text-align: center;
    background: #0b0b0b;
    font-size: 14px;
  }

  #player {
    position: relative;
    background: black;
  }

  #toolbar {
    position: absolute;
    top: 10px;
    right: 10px;
    z-index: 10;
    display: flex;
    gap: 8px;
  }

  #toolbar button {
    background: #111;
    color: #fff;
    border: 1px solid #333;
    padding: 6px 10px;
    cursor: pointer;
  }

  #toolbar button:hover { border-color: #d22; }

  iframe {
    width: 100%;
    height: 100%;
    border: none;
  }

  #placeholder {
    position: absolute;
    inset: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #666;
  }
</style>
</head>
<body>

<div id="app">
  <div id="games"></div>

  <div id="player">
    <div id="toolbar">
      <button id="fullscreenBtn">Fullscreen</button>
      <button id="popoutBtn">Open Tab</button>
    </div>

    <div id="placeholder">Select a game</div>
    <iframe id="frame"></iframe>
  </div>
</div>

<script>
const GAMES_JSON = "/Games/Zones.json";

const gamesEl = document.getElementById("games");
const frame = document.getElementById("frame");
const placeholder = document.getElementById("placeholder");

let currentURL = null;

/* Load games */
fetch(GAMES_JSON)
  .then(r => r.json())
  .then(games => {
    games.forEach(game => {
      const el = document.createElement("div");
      el.className = "game";
      el.innerHTML = `
        <img src="${game.cover}">
        <div class="title">${game.name}</div>
      `;
      el.onclick = () => loadGame(game.url);
      gamesEl.appendChild(el);
    });
  });

function loadGame(url) {
  currentURL = url;
  placeholder.style.display = "none";
  frame.src = url;
}

/* Fullscreen */
document.getElementById("fullscreenBtn").onclick = () => {
  document.getElementById("player").requestFullscreen();
};

/* Open iframe URL in new tab */
document.getElementById("popoutBtn").onclick = () => {
  if (!currentURL) return;
  window.open(currentURL, "_blank");
};
</script>

</body>
</html>
